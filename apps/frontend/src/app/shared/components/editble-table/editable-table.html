<div class="table-container">
  <div class="flex-table">
    <!-- Header Row -->
    <div class="table-header">
      @for (column of columns(); track column.field) {
      <div class="table-cell header-cell">{{ column.header }}</div>
      }
      @if (showActions()) {
      <div class="table-cell header-cell actions-cell">Actions</div>
      }
    </div>

    <!-- Data Rows -->
    @if (data().length > 0) {
    @for (row of data(); track $index; let rowIndex = $index) {
    <app-editable-table-row
      [row]="row"
      [columns]="columns()"
      [rowIndex]="rowIndex"
      [isEditing]="isEditing(rowIndex)"
      [editingData]="editingRowData()"
      [showActions]="showActions()"
      (edit)="onEdit($event.rowIndex, $event.row)"
      (save)="onSave($event)"
      (cancel)="onCancel()"
      (delete)="onDelete($event)"
      (fieldChange)="onFieldChange($event.field, $event.value)"
    />
    }
    }
    @else {
    <div class="no-data">No data available</div>
    }
  </div>

  <mat-paginator
    [length]="totalItems()"
    [pageSize]="pageSize()"
    [pageIndex]="pageIndex()"
    [pageSizeOptions]="pageSizeOptions()"
    (page)="onPageChange($event)"
    showFirstLastButtons
  >
  </mat-paginator>
</div>
